line-length = 120 # Maximum line length
target-version = "py312"
respect-gitignore = true

[lint.per-file-ignores]
"examples/*" = [
    "E266",    # Multiple # signs per row
    "E501",    # Line too long
    "D100",    # Missing module docstrings
    "PLR1711", # Useless return statement
    "E402",    # Module import not at top of file
    "PLC0415", # Import outside top-level
    "B018",    # Found useless expression. Either assign it to a variable or remove it. - Those might make sense in marimo notebooks
    "E266",    # Too many leading '#' for block comment. These make sense as markdown headings in marimo notebooks
    "T201",    # Print statements OK in examples
]
"tests/*" = [
    "D100",    # Missing module docstrings in tests
    "D103",    # Missing function docstrings in tests
    "PLR2004", # Magic values OK in tests
    "S101",    # Use of assert (OK in tests)
    "T201",    # Print statements OK in tests
]
"scripts/*" = [
    "D100",    # Missing module docstrings in scripts
    "T201",    # Print statements OK in scripts
]

[lint]
# Global ignores - keep your current ones, they're reasonable
extend-ignore = [
    "D105",    # Missing docstring in magic functions
    "D107",    # Missing docstring in __init__
    "PLR0912", # Too many branches
    "PLR0913", # Too many arguments in function definition
    "PLR0915", # Too many statements
    "PLR2004", # Magic value used in comparison
    "COM812",  # Trailing comma (conflicts with formatter)
    "ISC001",  # Implicit string concatenation (conflicts with formatter)
    "E501",    # Line too long (handled by formatter)
    "SIM108",  # Use ternary operator instead of `if`-`else`-block - this is less verbose but often less readable
    "RUF015",  # Prefer 'next(iter(...))' over single element slice - this is more efficient but much less readable
]

# Here, we explicitly choose the rules that ruff should verify.
# For a full list of available rules, see https://docs.astral.sh/ruff/rules/
# Comprehensive rule selection
select = [
    "E",       # pycodestyle errors
    "W",       # pycodestyle warnings
    "F",       # Pyflakes
    "I",       # isort
    # TODO: activate "N",       # pep8-naming
    "D",       # pydocstyle
    "UP",      # pyupgrade
    "B",       # flake8-bugbear
    "A",       # flake8-builtins
    "C4",      # flake8-comprehensions
    "PL",      # Pylint
    "RUF",     # Ruff-specific rules
    # TODO: activate "T20",     # flake8-print - finsa print statements
    "SIM",     # flake8-simplify
    "TCH",     # flake8-type-checking
]

[lint.pydocstyle]
convention = "google"

[lint.isort]
known-first-party = ["Octopus"]  # Replace with your package
split-on-trailing-comma = true

[format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"
